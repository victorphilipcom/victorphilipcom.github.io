<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>My Tiingo Ticker</title>
  <style>
    /* Basic styling for a scrolling ticker */
    body {
      margin: 0; 
      padding: 0; 
      font-family: sans-serif;
    }
    #ticker-container {
      width: 100%;
      overflow: hidden;         /* hide overflow for the "marquee" effect */
      white-space: nowrap;
      border: 1px solid #ccc;
    }
    #ticker-text {
      display: inline-block;
      padding-left: 100%;       /* start off the right edge */
      animation: scroll-left 15s linear infinite;
      font-size: 16px;
      line-height: 40px;
    }
    @keyframes scroll-left {
      0%   { transform: translate(0, 0); }
      100% { transform: translate(-100%, 0); }
    }

    /* Optional color for gains vs. losses */
    .up   { color: green; }
    .down { color: red;   }
  </style>
</head>
<body>
  <div id="ticker-container">
    <div id="ticker-text">Loading quotes...</div>
  </div>

  <script>
    fetch("data.json")  // same directory if you're hosting via GitHub Pages
      .then(res => res.json())
      .then(quotes => {
        // 'quotes' is an array of objects like:
        // [{ ticker: "TSLA", last: 248.71, prevClose: 236.26, timestamp: "..."}, ...]

        // We'll build an array of HTML snippets for each ticker
        const tickerItems = quotes.map(q => {
          // Basic data
          const symbol = q.ticker;
          const last   = q.last  || 0;
          const prev   = q.prevClose || 0;

          // Calculate change vs. previous close
          const diff = last - prev;
          const diffStr = diff.toFixed(2);
          const sign = diff >= 0 ? "+" : ""; // Show "+" for positive
          
          // Use a CSS class for color
          const cssClass = diff > 0 ? 'up' : (diff < 0 ? 'down' : '');

          // Example label: "TSLA: $248.71 (+12.45)"
          return `<span class="${cssClass}">${symbol}: $${last.toFixed(2)} (${sign}${diffStr})</span>`;
        });

        // Join them with some spacing or a separator
        document.getElementById('ticker-text').innerHTML = tickerItems.join('  |  ');
      })
      .catch(err => {
        console.error("Failed to load quotes:", err);
        document.getElementById('ticker-text').textContent = "Error loading quotes...";
      });
  </script>
</body>
</html>
